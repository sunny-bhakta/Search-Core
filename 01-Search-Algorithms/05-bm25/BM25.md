# BM25 Search

## Use Cases
- Web and enterprise search engines (Elasticsearch, Solr, OpenSearch)
- E-commerce product search
- Academic and legal document retrieval
- News and media search
- Knowledge base and FAQ search

## History
BM25 (Best Matching 25) is a ranking function developed in the 1990s as part of the Okapi family of probabilistic information retrieval models. It improved upon earlier models by introducing term saturation and document length normalization. BM25 became the default ranking algorithm in many open-source search engines in the 2010s.

## Production Apps
- Elasticsearch (default since v5.0, 2016)
- Apache Solr
- OpenSearch
- Wikipedia and Wikimedia search
- Many enterprise and SaaS search platforms

## Pros
- Strong relevance ranking for keyword queries
- Handles term frequency saturation and document length
- Widely adopted and well-studied
- Tunable parameters for different use cases

## Cons
- Still lexical: does not understand context or semantics
- Requires parameter tuning (k1, b) for best results
- Not as effective for very short or very long queries
- Outperformed by neural/semantic models for some tasks

## Definition
**BM25** is a probabilistic ranking function that scores documents based on the frequency of query terms, their rarity across the corpus, and document length. It is an evolution of TF-IDF, with better handling of term frequency and normalization.

## Example: BM25 Scoring (Simplified)
Suppose you have a query and a set of documents. For each document, BM25 computes a score for each query term and sums them:

```js
// Example parameters
const k1 = 1.5;
const b = 0.75;
const avgDocLen = 100;
const N = 1000; // total docs
const n = 10;   // docs containing term
const f = 3;    // term frequency in doc
const dl = 120; // doc length

// IDF (inverse document frequency)
const idf = Math.log((N - n + 0.5) / (n + 0.5));

// BM25 score for a term
const score = idf * ((f * (k1 + 1)) / (f + k1 * (1 - b + b * (dl / avgDocLen))));
console.log('BM25 score:', score);
```

In practice, BM25 scores are summed for all query terms to rank documents.
